/*
 *
 * Copyright (c) 2018 João Pedro Martins Neves (shivayl) - All Rights Reserved.
 *
 * Portfolio-OS is licensed under the GNU LGPLv3, located in the root of this
 * project, under the name "LICENSE.md".
 *
 */

"use strict";const SERVER_ROOT_PATH="http://www.shivayl.com/",IMG_PATH=`${SERVER_ROOT_PATH}img/`,API_ROOT_PATH=`${SERVER_ROOT_PATH}portfolio-os/api/`,AUTH_TOKEN_ID="JWT";!function(e){var t;if("function"==typeof define&&define.amd&&(define(e),t=!0),"object"==typeof exports&&(module.exports=e(),t=!0),!t){var n=window.Cookies,i=window.Cookies=e();i.noConflict=function(){return window.Cookies=n,i}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(i){function r(){}function s(t,n,s){if("undefined"!=typeof document){"number"==typeof(s=e({path:"/"},r.defaults,s)).expires&&(s.expires=new Date(1*new Date+864e5*s.expires)),s.expires=s.expires?s.expires.toUTCString():"";try{var o=JSON.stringify(n);/^[\{\[]/.test(o)&&(n=o)}catch(e){}n=i.write?i.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var a="";for(var l in s)s[l]&&(a+="; "+l,!0!==s[l]&&(a+="="+s[l].split(";")[0]));return document.cookie=t+"="+n+a}}function o(e,n){if("undefined"!=typeof document){for(var r={},s=document.cookie?document.cookie.split("; "):[],o=0;o<s.length;o++){var a=s[o].split("="),l=a.slice(1).join("=");n||'"'!==l.charAt(0)||(l=l.slice(1,-1));try{var c=t(a[0]);if(l=(i.read||i)(l,c)||t(l),n)try{l=JSON.parse(l)}catch(e){}if(r[c]=l,e===c)break}catch(e){}}return e?r[e]:r}}return r.set=s,r.get=function(e){return o(e,!1)},r.getJSON=function(e){return o(e,!0)},r.remove=function(t,n){s(t,"",e(n,{expires:-1}))},r.defaults={},r.withConverter=n,r}(function(){})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.whenDomReady=t()}(this,function(){var e=["interactive","complete"],t=function(t,n){return new Promise(function(i){t&&"function"!=typeof t&&(n=t,t=null),n=n||window.document;var r=function(){return i(void(t&&setTimeout(t)))};-1!==e.indexOf(n.readyState)?r():n.addEventListener("DOMContentLoaded",r)})};return t.resume=function(e){return function(n){return t(e).then(function(){return n})}},t}),function(e){function t(e){if(!(this instanceof t))return new t(e);if(null==e)e=t.engines.nativeMath;else if("function"!=typeof e)throw new TypeError("Expected engine to be a function, got "+typeof e);this.engine=e}function n(e){return function(){return e}}function i(e,t){return 0===t?e:function(n){return e(n)+t}}function r(e){var t=+e;return 0>t?Math.ceil(t):Math.floor(t)}function s(e,t){return 0>e?Math.max(e+t,0):Math.min(e,t)}function o(){}var a="Random",l="function"!=typeof Math.imul||-5!==Math.imul(4294967295,5)?function(e,t){var n=65535&e,i=65535&t;return n*i+((e>>>16&65535)*i+n*(t>>>16&65535)<<16>>>0)|0}:Math.imul,c="function"==typeof String.prototype.repeat&&"xxx"==="x".repeat(3)?function(e,t){return e.repeat(t)}:function(e,t){for(var n="";t>0;)1&t&&(n+=e),t>>=1,e+=e;return n},d=t.prototype;t.engines={nativeMath:function(){return 4294967296*Math.random()|0},mt19937:function(e){function n(e){for(var t=0,n=0;227>(0|t);t=t+1|0)n=2147483648&e[t]|2147483647&e[t+1|0],e[t]=e[t+397|0]^n>>>1^(1&n?2567483615:0);for(;623>(0|t);t=t+1|0)n=2147483648&e[t]|2147483647&e[t+1|0],e[t]=e[t-227|0]^n>>>1^(1&n?2567483615:0);n=2147483648&e[623]|2147483647&e[0],e[623]=e[396]^n>>>1^(1&n?2567483615:0)}return function(){function i(){(0|s)>=624&&(n(r),s=0);var e=r[s];return s=s+1|0,0|function(e){return e^=e>>>11,e^=e<<7&2636928640,(e^=e<<15&4022730752)^e>>>18}(e)}var r=new e(624),s=0;return i.discard=function(e){for((0|s)>=624&&(n(r),s=0);e-s>624;)e-=624-s,n(r),s=0;return s=s+e|0,i},i.seed=function(e){var t=0;r[0]=t=0|e;for(var n=1;624>n;n=n+1|0)r[n]=t=l(t^t>>>30,1812433253)+n|0;return s=624,i},i.seedWithArray=function(e){return i.seed(19650218),function(e,t){for(var n=1,i=0,r=t.length,s=0|Math.max(r,624),o=0|e[0];(0|s)>0;--s)e[n]=o=(e[n]^l(o^o>>>30,1664525))+(0|t[i])+(0|i)|0,++i,(0|(n=n+1|0))>623&&(e[0]=e[623],n=1),i>=r&&(i=0);for(s=623;(0|s)>0;--s)e[n]=o=(e[n]^l(o^o>>>30,1566083941))-n|0,(0|(n=n+1|0))>623&&(e[0]=e[623],n=1);e[0]=2147483648}(r,e),i},i.autoSeed=function(){return i.seedWithArray(t.generateEntropyArray())},i}}("function"==typeof Int32Array?Int32Array:Array),browserCrypto:"undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof Int32Array?function(){var e=null,t=128;return function(){return t>=128&&(null===e&&(e=new Int32Array(128)),crypto.getRandomValues(e),t=0),0|e[t++]}}():null},t.generateEntropyArray=function(){for(var e=[],n=t.engines.nativeMath,i=0;16>i;++i)e[i]=0|n();return e.push(0|(new Date).getTime()),e},t.int32=function(e){return 0|e()},d.int32=function(){return t.int32(this.engine)},t.uint32=function(e){return e()>>>0},d.uint32=function(){return t.uint32(this.engine)},t.uint53=function(e){return 4294967296*(2097151&e())+(e()>>>0)},d.uint53=function(){return t.uint53(this.engine)},t.uint53Full=function(e){for(;;){var t=0|e();if(!(2097152&t))return 4294967296*(2097151&t)+(e()>>>0);if(2097152==(4194303&t)&&0==(0|e()))return 9007199254740992}},d.uint53Full=function(){return t.uint53Full(this.engine)},t.int53=function(e){var t=0|e();return 4294967296*(2097151&t)+(e()>>>0)+(2097152&t?-9007199254740992:0)},d.int53=function(){return t.int53(this.engine)},t.int53Full=function(e){for(;;){var t=0|e();if(!(4194304&t))return 4294967296*(2097151&t)+(e()>>>0)+(2097152&t?-9007199254740992:0);if(4194304==(8388607&t)&&0==(0|e()))return 9007199254740992}},d.int53Full=function(){return t.int53Full(this.engine)},t.integer=function(){function e(e){return 0==(e+1&e)}function r(t){return e(t)?function(e){return function(t){return t()&e}}(t):function(e){var t=e+1,n=t*Math.floor(4294967296/t);return function(e){var i=0;do{i=e()>>>0}while(i>=n);return i%t}}(t)}function s(t){var n=t+1;if(function(e){return 0==(0|e)}(n)){var i=(n/4294967296|0)-1;if(e(i))return function(e){return function(t){return 4294967296*(t()&e)+(t()>>>0)}}(i)}return function(e){var t=e*Math.floor(9007199254740992/e);return function(n){var i=0;do{i=4294967296*(2097151&n())+(n()>>>0)}while(i>=t);return i%e}}(n)}function o(e,t){return function(n){var i=0;do{var r=0|n();i=4294967296*(2097151&r)+(n()>>>0)+(2097152&r?-9007199254740992:0)}while(e>i||i>t);return i}}return function(e,a){if(e=Math.floor(e),a=Math.floor(a),-9007199254740992>e||!isFinite(e))throw new RangeError("Expected min to be at least -9007199254740992");if(a>9007199254740992||!isFinite(a))throw new RangeError("Expected max to be at most 9007199254740992");var l=a-e;return 0>=l||!isFinite(l)?n(e):4294967295===l?0===e?t.uint32:i(t.int32,e+2147483648):4294967295>l?i(r(l),e):9007199254740991===l?i(t.uint53,e):9007199254740991>l?i(s(l),e):a-1-e==9007199254740991?i(t.uint53Full,e):-9007199254740992===e&&9007199254740992===a?t.int53Full:-9007199254740992===e&&9007199254740991===a?t.int53:-9007199254740991===e&&9007199254740992===a?i(t.int53,1):9007199254740992===a?i(o(e-1,a-1),1):o(e,a)}}(),d.integer=function(e,n){return t.integer(e,n)(this.engine)},t.realZeroToOneInclusive=function(e){return t.uint53Full(e)/9007199254740992},d.realZeroToOneInclusive=function(){return t.realZeroToOneInclusive(this.engine)},t.realZeroToOneExclusive=function(e){return t.uint53(e)/9007199254740992},d.realZeroToOneExclusive=function(){return t.realZeroToOneExclusive(this.engine)},t.real=function(){return function(e,n,r){if(!isFinite(e))throw new RangeError("Expected left to be a finite number");if(!isFinite(n))throw new RangeError("Expected right to be a finite number");return i(function(e,t){return 1===t?e:0===t?function(){return 0}:function(n){return e(n)*t}}(r?t.realZeroToOneInclusive:t.realZeroToOneExclusive,n-e),e)}}(),d.real=function(e,n,i){return t.real(e,n,i)(this.engine)},t.bool=function(){function e(e){return 1==(1&e())}function i(e,t){return function(n){return e(n)<t}}return function(r,s){return null==s?null==r?e:function(e){if(0>=e)return n(!1);if(e>=1)return n(!0);var r=4294967296*e;return r%1==0?i(t.int32,r-2147483648|0):i(t.uint53,Math.round(9007199254740992*e))}(r):0>=r?n(!1):r>=s?n(!0):i(t.integer(0,s-1),r)}}(),d.bool=function(e,n){return t.bool(e,n)(this.engine)},t.pick=function(e,n,i,o){var a=n.length,l=null==i?0:s(r(i),a),c=void 0===o?a:s(r(o),a);if(!(l>=c))return n[t.integer(l,c-1)(e)]},d.pick=function(e,n,i){return t.pick(this.engine,e,n,i)};var u=Array.prototype.slice;t.picker=function(e,n,i){var r=u.call(e,n,i);if(!r.length)return o;var s=t.integer(0,r.length-1);return function(e){return r[s(e)]}},t.shuffle=function(e,n,i){var r=n.length;if(r){null==i&&(i=0);for(var s=r-1>>>0;s>i;--s){var o=t.integer(0,s)(e);if(s!==o){var a=n[s];n[s]=n[o],n[o]=a}}}return n},d.shuffle=function(e){return t.shuffle(this.engine,e)},t.sample=function(e,n,i){if(0>i||i>n.length||!isFinite(i))throw new RangeError("Expected sampleSize to be within 0 and the length of the population");if(0===i)return[];var r=u.call(n),s=r.length;if(s===i)return t.shuffle(e,r,0);var o=s-i;return t.shuffle(e,r,o-1).slice(o)},d.sample=function(e,n){return t.sample(this.engine,e,n)},t.die=function(e){return t.integer(1,e)},d.die=function(e){return t.die(e)(this.engine)},t.dice=function(e,n){var i=t.die(e);return function(e){var t=[];t.length=n;for(var r=0;n>r;++r)t[r]=i(e);return t}},d.dice=function(e,n){return t.dice(e,n)(this.engine)},t.uuid4=function(){function e(e,t){return c("0",t-e.length)+e}return function(t){var n=t()>>>0,i=0|t(),r=0|t(),s=t()>>>0;return e(n.toString(16),8)+"-"+e((65535&i).toString(16),4)+"-"+e((i>>4&4095|16384).toString(16),4)+"-"+e((16383&r|32768).toString(16),4)+"-"+e((r>>4&65535).toString(16),4)+e(s.toString(16),8)}}(),d.uuid4=function(){return t.uuid4(this.engine)},t.string=function(e){null==e&&(e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_-");var n=e.length;if(!n)throw new Error("Expected pool not to be an empty string");var i=t.integer(0,n-1);return function(t,n){for(var r="",s=0;n>s;++s){var o=i(t);r+=e.charAt(o)}return r}},d.string=function(e,n){return t.string(n)(this.engine,e)},t.hex=function(){var e="0123456789abcdef",n=t.string(e),i=t.string(e.toUpperCase());return function(e){return e?i:n}}(),d.hex=function(e,n){return t.hex(n)(this.engine,e)},t.date=function(e,n){if(!(e instanceof Date))throw new TypeError("Expected start to be a Date, got "+typeof e);if(!(n instanceof Date))throw new TypeError("Expected end to be a Date, got "+typeof n);var i=t.integer(e.getTime(),n.getTime());return function(e){return new Date(i(e))}},d.date=function(e,n){return t.date(e,n)(this.engine)},"function"==typeof define&&define.amd?define(function(){return t}):"undefined"!=typeof module&&"function"==typeof require?module.exports=t:(function(){var n=e[a];t.noConflict=function(){return e[a]=n,this}}(),e[a]=t)}(this),function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof module&&module.exports?module.exports=t():e.VanillaTree=t()}(this,function(){var e,t,n,i,r,s,o,a,l,c,d,u,p=(e=window,t=document,n=[],i=/\.(.+)/,r=0,s="EventListener",o="MatchesSelector",(u=function(e,t){return new u.i(e,t)}).i=function(i,r){n.push.apply(this,i?i.nodeType||i==e?[i]:""+i===i?/</.test(i)?((a=t.createElement(r||"q")).innerHTML=i,a.children):(r&&u(r)[0]||t).querySelectorAll(i):/f/.test(typeof i)?/c/.test(t.readyState)?i():u(t).on("DOMContentLoaded",i):i:n)},u.i[d="prototype"]=(u.extend=function(e){for(c=arguments,a=1;a<c.length;a++)if(d=c[a])for(l in d)e[l]=d[l];return e})(u.fn=u[d]=n,{on:function(e,t){return e=e.split(i),this.map(function(n){(i[a=e[0]+(n.b$=n.b$||++r)]=i[a]||[]).push([t,e[1]]),n["add"+s](e[0],t)}),this},off:function(e,t){return e=e.split(i),d="remove"+s,this.map(function(n){if(a=(c=i[e[0]+n.b$])&&c.length)for(;l=c[--a];)t&&t!=l[0]||e[1]&&e[1]!=l[1]||(n[d](e[0],l[0]),c.splice(a,1));else!e[1]&&n[d](e[0],t)}),this},is:function(e){return!!(l=(a=this[0])&&(a.matches||a["webkit"+o]||a["moz"+o]||a["ms"+o]))&&l.call(a,e)}}),u),m=function(e,t){return p.extend(document.createElement(e),t)},h=function(e,t){var n=this,i=n.container=p(e)[0],r=n.tree=i.appendChild(m("ul",{className:"vtree"}));n.placeholder=t&&t.placeholder,n._placeholder(),n.leafs={},r.addEventListener("click",function(e){p(e.target).is(".vtree-leaf-label")?n.select(e.target.parentNode.getAttribute("data-vtree-id")):p(e.target).is(".vtree-toggle")&&n.toggle(e.target.parentNode.getAttribute("data-vtree-id"))}),t&&t.contextmenu&&(r.addEventListener("contextmenu",function(e){var n;if(p(".vtree-contextmenu").forEach(function(e){e.parentNode.removeChild(e)}),p(e.target).is(".vtree-leaf-label")){e.preventDefault(),e.stopPropagation(),n=m("menu",{className:"vtree-contextmenu"});var i=e.target.getBoundingClientRect();p.extend(n.style,{top:(e.target.offsetTop+i.height).toString()+"px",left:e.target.offsetLeft.toString()+"px",display:"block"}),t.contextmenu.forEach(function(t){n.appendChild(m("li",{className:"vtree-contextmenu-item",innerHTML:t.label})).addEventListener("click",t.action.bind(t,e.target.parentNode.getAttribute("data-vtree-id")))}),e.target.parentNode.appendChild(n)}}),document.addEventListener("click",function(e){2!==e.button&&p(".vtree-contextmenu").forEach(function(e){e.parentNode.removeChild(e)})}))};return h.prototype={constructor:h,_dispatch:function(e,t){var n;try{n=new CustomEvent("vtree-"+e,{bubbles:!0,cancelable:!0,detail:{id:t}})}catch(i){(n=document.createEvent("CustomEvent")).initCustomEvent("vtree-"+e,!0,!0,{id:t})}return(this.getLeaf(t,!0)||this.tree).dispatchEvent(n),this},_placeholder:function(){var e;return!this.tree.children.length&&this.placeholder?this.tree.innerHTML='<li class="vtree-placeholder">'+this.placeholder+"</li>":(e=this.tree.querySelector(".vtree-placeholder"))&&this.tree.removeChild(e),this},getLeaf:function(e,t){var n=p('[data-vtree-id="'+e+'"]',this.tree)[0];if(!t&&!n)throw Error('No VanillaTree leaf with id "'+e+'"');return n},getChildList:function(e){var t,n;return e?(n=this.getLeaf(e),(t=p("ul",n)[0])||(t=n.appendChild(m("ul",{className:"vtree-subtree"})))):t=this.tree,t},add:function(e){var t,n=m("li",{className:"vtree-leaf"}),i=this.getChildList(e.parent);return n.setAttribute("data-vtree-id",t=e.id||Math.random()),n.appendChild(m("span",{className:"vtree-toggle"})),n.appendChild(m("a",{className:"vtree-leaf-label",innerHTML:e.label})),i.appendChild(n),i!==this.tree&&i.parentNode.classList.add("vtree-has-children"),(this.leafs[t]=e).opened||this.close(t),e.selected&&this.select(t),this._placeholder()._dispatch("add",t)},move:function(e,t){var n=this.getLeaf(e),i=n.parentNode,r=this.getLeaf(t,!0);return r&&r.classList.add("vtree-has-children"),this.getChildList(t).appendChild(n),i.parentNode.classList.toggle("vtree-has-children",!!i.children.length),this._dispatch("move",e)},remove:function(e){var t=this.getLeaf(e),n=t.parentNode;return n.removeChild(t),n.parentNode.classList.toggle("vtree-has-children",!!n.children.length),this._placeholder()._dispatch("remove",e)},open:function(e){return this.getLeaf(e).classList.remove("closed"),this._dispatch("open",e)},close:function(e){return this.getLeaf(e).classList.add("closed"),this._dispatch("close",e)},toggle:function(e){return this[this.getLeaf(e).classList.contains("closed")?"open":"close"](e)},select:function(e){var t=this.getLeaf(e);return t.classList.contains("vtree-selected")||(p("li.vtree-leaf",this.tree).forEach(function(e){e.classList.remove("vtree-selected")}),t.classList.add("vtree-selected"),this._dispatch("select",e)),this}},h});const LoginType=Object.freeze({Local:"Id",GitHub:"Github_Id",Google:"Google_Id"});try{void 0!==process.env&&(module.exports=LoginType)}catch(e){}const PermissionType=Object.freeze({UserRead:"user.read",UserWrite:"user.write",UserDelete:"user.delete",Admin:"admin"});try{void 0!==process.env&&(module.exports=PermissionType)}catch(e){}const DefaultWebsiteHosts=Object.freeze({GitHub:"github.com"}),FileSystemItemType=Object.freeze({File:1,FileUrl:2,Executable:3,Directory:4,ExecutableDirectory:5}),GridType=Object.freeze({GridX:"grid-x",GridY:"grid-y"}),HostId=Object.freeze({GitHub:1,Behance:2,Twitter:3,Instagram:4}),ProfilePageType=Object.freeze({MyProfile:"myProfile",Explore:"explore",UserProfiles:"userProfiles"}),RequestType=Object.freeze({Get:"GET",Post:"POST",Put:"PUT",Delete:"DELETE"}),voteType=Object.freeze({DownVote:0,UpVote:1});class CommonUtils{static sanitizeHTML(e){return e.toString().trim().replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#x27;").replace(/"/g,"&#34;").replace(/&/g,"&amp;").replace(/\//g,"&#x2F;")}}try{void 0!==process.env&&(module.exports=CommonUtils)}catch(e){}Array.prototype.last=(()=>this[this.length-1]);class Utils{static log(e){console.log(e)}static randomString(e){return Random.string("qwertyuiopasdfghjklçzxcvbnmQWERTYUIOPÇLKJHGFDSAZXCVBNM1234567890«»")(Random.engines.browserCrypto,e)}static randomNumString(e){return Random.string("1234567890")(Random.engines.browserCrypto,e)}static parseIDs(e){return e.split(/_/g)}static parsePxToInt(e){try{return parseInt(e.substring(0,e.length-2))}catch(e){console.error("Error:",e)}}static calculateGrid(e,t){return{x:Math.floor(100/e)-1,y:Math.floor(100/t)-1}}}class Errors{static get existingKey(){throw new Error("An item with the same key has already been added.")}static get noTypeProvided(){throw new Error("No type provided on Collection instantiation.")}static wrongType(e){throw new Error(`The value is not from the same type as the List<${e}>`)}}class Collection{constructor(e=!1,t="any"){if(this.elements=[],this.uniqueKeys=e,!t)throw Errors.noTypeProvided;this.type=t}get length(){return this.elements.length}getAll(){return this.elements}get(e){return this.elements[e]}clear(){this.elements=[]}push(e){this.elements.push(e)}splice(e){this.elements.splice(e,1)}}class Dictionary extends Collection{constructor(e){super(e,"any")}getAllValues(){let e=[];for(let t=0;t<this.elements.length;++t)e.push(Object.values(this.elements[t])[0]);return e}add(e,t){if(this.uniqueKeys&&!1!==this.findIndexOfKey(e))throw new Error(Errors.existingKey);this.push({[e]:t})}remove(e){const t=this.findIndexOfKey(e);if(!1===t)return!1;this.splice(t)}getByIndex(e){return Object.values(this.elements[e])[0]}getKeyByIndex(e){return Object.keys(this.elements[e])[0]}getByKey(e){try{const t=this.findIndexOfKey(e);return!1!==t&&this.elements[t][e]}catch(e){console.error(e)}}findIndexOfKey(e){for(let t=0;t<this.elements.length;t++)if(Object.keys(this.elements[t])[0]===e)return t;return!1}}class List extends Collection{constructor(e){super(!1,e)}add(e){switch(this.type){case"any":return this.push(e);case"int":if(this.isInt(e))return this.push(e);break;case"float":if(this.isFloat(e))return this.push(e);break;default:if(typeof e===this.type)return this.push(e)}throw Errors.wrongType(this.type)}remove(e){this.splice(e)}isInt(e){return"number"==typeof e&&e%1==0}isFloat(e){return"number"==typeof e&&e%1!=0}}class DomUtils{static get(e){return document.querySelector(e)}static getAll(e){return document.querySelectorAll(e)}static getParentByIdInclude(e,t){let n=e;for(;n&&!n.id.includes(t);)n=n.parentNode;return n}static getParentByTag(e,t){let n=e;for(;n&&n.localName!==t;)n=n.parentNode;return n}static getParentByClassInclude(e,t){let n=e;for(;n&&!n.className.includes(t);)n=n.parentNode;return n}static getDirectChildrenByTag(e,t){if(e.localName===t)return e;const n=e.children;let i=!1,r=[];for(let e=0;e<n.length;e++)n[e].localName===t&&(r.push(n[e]),i=!0);return!!i&&(r.length<=1?r[0]:r)}static getStyle(e,t){return window.getComputedStyle(e).getPropertyValue(t)}static getAttributeFromElem(e,t){const n=e.attributes;for(let e=0;e<n.length;e++)if(n[e].localName===t)return n[e].nodeValue}static getOffset(e){let t=0,n=0;for(;e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)t+=e.offsetLeft-e.scrollLeft,n+=e.offsetTop-e.scrollTop,e=e.offsetParent;return{top:n,left:t}}}class FSItemModelBase{constructor(e,t,n,i=null,r){this.type=e,this.permission=t,this.name=n,this.content=r,this.iconUrl=i}}try{void 0!==process.env&&(module.exports=FSItemModelBase)}catch(e){}let fsItemModelBaseFile,fsItemModelBaseDir;try{void 0!==process.env&&(fsItemModelBaseFile=require("./fsItemModelBase"))}catch(e){fsItemModelBaseFile=FSItemModelBase}class FileModel extends fsItemModelBaseFile{constructor(e,t,n,i,r=null){super(e,t,n,i,r)}}try{void 0!==process.env&&(module.exports=FileModel)}catch(e){}try{void 0!==process.env&&(fsItemModelBaseDir=require("./fsItemModelBase"))}catch(e){fsItemModelBaseDir=FSItemModelBase}class DirectoryModel extends fsItemModelBaseDir{constructor(e,t,n=null,i=null,r){super(i||FileSystemItemType.Directory,e,t,n||"",r)}}try{void 0!==process.env&&(module.exports=DirectoryModel)}catch(e){}class SystemDirectoryModel extends DirectoryModel{constructor(e,t){super(PermissionType.UserRead,e,null,null,t)}}try{void 0!==process.env&&(module.exports=SystemDirectoryModel)}catch(e){}class AppRating{constructor(){this.upVotes=0,this.downVotes=0,this.voteRatio=0,this.userVotes=[]}}class AppStoreApplication{constructor(e,t,n,i){this.type=e,this.name=t,this.creator=n,this.htmlIndexUrl=i,this.rating=[],this.downloads=[],this.creationDate="",this.lastUpdateDate=""}}class SystemApp{constructor(e,t,n,i){this.name=e,this.executeFunction=(e=>{i(e)}),this.startMenuIconUrl=t,this.taskbarIconUrl=n}}class UserVote{constructor(e,t){this.user=e,this.voteType=t,this.timestamp=""}}class HttpClient{constructor(){throw new Error("Can not instantiate the static classs HttpClient")}static get(e,t=!0){return new Promise(async(n,i)=>{HttpClient.request(RequestType.Get,e,null,t).then(e=>n(e.json())).catch(e=>i(e))})}static post(e,t,n=!0){return new Promise(async(i,r)=>{HttpClient.request(RequestType.Post,e,t,n).then(e=>{i(e.json())}).catch(e=>{r(e)})})}static put(e,t,n=!0){return new Promise(async(i,r)=>{HttpClient.request(RequestType.Put,e,t,n).then(e=>{i(e.json())}).catch(e=>{r(e)})})}static delete(e,t=!0){return new Promise(async(n,i)=>{HttpClient.request(RequestType.Delete,e,null,t).then(e=>{n(e.json())}).catch(e=>{i(e)})})}static request(e,t,n=null,i=!0,r){return new Promise(async(r,s)=>{let o={method:e,headers:{}};i&&(o.headers.Authorization="Bearer "+localStorage.getItem(AUTH_TOKEN_ID)),e!==RequestType.Post&&e!==RequestType.Put||(o.body=n?JSON.stringify(n):"",o.headers["Content-Type"]="application/json;charset=utf-8"),await fetch(t,o).then(e=>r(e)).catch(e=>s(e))})}}class Authentication{constructor(){}init(){let e=Cookies.get("JWT");try{(e=e.split(":")[1].split(".")).pop(),e=e.join(".")}catch(e){}finally{Cookies.remove("JWT"),void 0!==e&&localStorage.setItem(AUTH_TOKEN_ID,e)}}JWTLocalStorageToCookie(e=null){let t=e?JSON.stringify(Object.assign({JWT:this.getJWT()},e)):this.getJWT();Cookies.set("JWT",t),localStorage.removeItem(AUTH_TOKEN_ID)}getJWT(){return localStorage.getItem(AUTH_TOKEN_ID)}logout(){localStorage.removeItem(AUTH_TOKEN_ID),Cookies.remove("JWT")}}const authentication=new Authentication;class GridSystemTemplates{constructor(){throw new Error("Can not intantiate the static class 'GridSystemTemplates'")}static rowTemplate(e,t,n=null,i=null){return n=null===n?"":`width: ${n.toString()}%;min-width: ${n.toString()}% !important;`,i=null===i?"":`height: ${i.toString()}%;min-height: ${i.toString()}% !important;`,`\n      <div id="${e}" class="${t} ${t===GridType.GridY?"grid-system-row-y":"grid-system-row-x"}" style="${n}${i}"></div>\n    `}static cellTemplate(e,t,n,i=!1,r){return`\n        <article id="${e}" class="cell grid-system-cell ${i=i?"droppable":""} ${r}" style="${t=null===t?"":`width: ${t.toString()}%;min-width: ${t.toString()}% !important;`}${n=null===n?"":`height: ${n.toString()}%;min-height: ${n.toString()}% !important;`}">&nbsp;</article>\n      `}}let gridSystem=null;class GridSystem{constructor(){if(gridSystem)throw new Error("GridSystem can only have one instance (singleton)");gridSystem=this,Object.freeze(gridSystem)}static _(){return gridSystem}insertGrid(e){let t=0,n=0;const i=e.gridType===GridType.GridY?e.cellWidthPercent:100,r=e.gridType===GridType.GridX?e.cellHeightPercent:100,s=e.gridType===GridType.GridX?e.cellWidthPercent:100,o=e.gridType===GridType.GridY?e.cellHeightPercent:100;for(let a=0;a<=e.gridXCount;a++){e.target.innerHTML+=GridSystemTemplates.rowTemplate(e.rowIdsPrefix+(a+1).toString(),e.gridType,i,r),t++;for(let i=0;i<=e.gridYCount;i++){document.getElementById(`${e.rowIdsPrefix}${t}`).innerHTML+=GridSystemTemplates.cellTemplate(e.cellIdsPrefix+(n+1).toString(),s,o,e.droppableCell,e.additionalCellClasses),n++}}}findEmptyCell(e,t){for(let n=0;n<t;n++){let t=document.getElementById(`${e}${n+1}`);if(t.childElementCount<=0)return t}return!1}}new GridSystem;let dragAndDrop=null;class DragAndDrop{constructor(){if(dragAndDrop)throw new Error("There can only be one instance of DragAndDrop");this.isDragging=Boolean,this.currentFreeDragElem=HTMLElement,this.currentDragData="",this.currentFreeDragData="",this.utils={populateDataTransfer:e=>{const t=e.target,n=t.id,i=t.localName,r=t.className,s=`<${i} id="${n}" class="${r}"> ${t.innerHTML} </${i}>`;e.dataTransfer.setData("text/plain",s),this.currentDragData=s,e.dataTransfer.effectAllowed="move",e.dataTransfer.dropEffect="move",r.includes("window-manager")&&(this.currentFreeDragData=e.dataTransfer.getData("text/plain"))},acceptDrop:e=>{e.preventDefault(),e.dataTransfer.effectAllowed="move",e.dataTransfer.dropEffect="move"}},dragAndDrop=this,Object.seal(dragAndDrop),this.init()}static _(){return dragAndDrop}init(){this.updateDraggables(),this.updateFreeDraggListeners()}updateDraggables(){this.cancelNonDraggableElements(),this.updateDraggableElements(),this.updateDraggListeners(),this.updateDroppableListeners()}cancelNonDraggableElements(){Array.from(document.getElementsByTagName("img")).forEach(e=>{e.setAttribute("draggable","false")}),Array.from(document.getElementsByTagName("a")).forEach(e=>{e.setAttribute("draggable","false")})}updateDraggableElements(){Array.from(document.getElementsByClassName("draggable")).forEach(e=>{e.setAttribute("draggable","true")}),Array.from(document.getElementsByClassName("free-draggable")).forEach(e=>{e.setAttribute("draggable","true")})}updateDraggListeners(){const e=document.getElementsByClassName("draggable");if(!(e.length<=0))for(let t=0;t<e.length;t++)e[t].removeEventListener("dragstart",e=>{this.dragstartHandler}),e[t].addEventListener("dragstart",e=>{e.stopPropagation(),this.dragstartHandler(e)})}updateDroppableListeners(){const e=document.getElementsByClassName("droppable");if(!(e.length<=0))for(let t=0;t<e.length;t++)e[t].removeEventListener("dragover",e=>{this.dragoverHandler}),e[t].addEventListener("dragover",e=>{e.stopPropagation(),this.dragoverHandler(e)},!1),e[t].removeEventListener("drop",e=>{this.dropHandler}),e[t].addEventListener("drop",e=>{e.stopPropagation(),this.dropHandler(e)},!1)}updateFreeDraggListeners(){const e=document.getElementsByClassName("free-draggable");if(!(e.length<=0))for(let t=0;t<e.length;t++)e[t].removeEventListener("mousedown",e=>{this.freeDragHandler(e)}),e[t].addEventListener("mousedown",e=>(this.freeDragHandler(e),!1)),window.removeEventListener("mouseup",e=>{this.freeDragendHandler(e)}),window.addEventListener("mouseup",e=>{this.freeDragendHandler(e)})}dragstartHandler(e){return e.stopPropagation(),this.utils.populateDataTransfer(e),!1}dragoverHandler(e){e.stopPropagation();const t=e.target;if(!(t.children.length>0||"article"!==t.localName||this.currentDragData===this.currentFreeDragData))return this.utils.acceptDrop(e),!1}dropHandler(e){e.stopPropagation(),e.preventDefault();const t=e.target,n=(new DOMParser).parseFromString(e.dataTransfer.getData("text/plain"),"text/html").body.firstChild;document.getElementById(n.id).remove(),this.currentDragData="",t.insertAdjacentElement("afterbegin",n),this.updateDraggables(),desktopManager.updateListeners()}freeDragHandler(e){return e.stopPropagation(),e.preventDefault(),this.isDragging=!0,this.currentFreeDragElem=DomUtils.getParentByTag(e.target,"article"),window.addEventListener("mousemove",e=>{this.mousePositionHandler(e)}),!1}mousePositionHandler(e){e.stopPropagation(),this.isDragging&&(this.currentFreeDragElem.style.top=e.pageY.toString()+"px",this.currentFreeDragElem.style.left=e.pageX.toString()+"px")}freeDragendHandler(e){e.stopPropagation(),window.removeEventListener("mousemove",e=>{this.mousePositionHandler(e)}),this.isDragging=!1,this.currentFreeDragData="",this.currentFreeDragElem=null}}new DragAndDrop;let windowResizer=null;class WindowResizer{constructor(){if(windowResizer)throw new Error("There can only be one instance of WindowResizer");this.currentResizer=null,windowResizer=this,Object.seal(windowResizer)}get _(){return windowResizer}updateListeners(){const e=document.getElementsByClassName("resizer");for(let t=0;t<e.length;++t)e[t].addEventListener("mousedown",e=>{e.preventDefault(),this.currentResizer=e.target,window.addEventListener("mousemove",resizeWindowHandler),window.addEventListener("mouseup",this.stopResizing),window.addEventListener("mouseleave",this.stopResizing),window.addEventListener("mousemouseout",this.stopResizing)})}stopResizing(e){e.preventDefault(),window.removeEventListener("mousemove",resizeWindowHandler),this.currentResizable=null}}const resizeWindowHandler=e=>{const t=DomUtils.getParentByClassInclude(windowResizer.currentResizer,"resizable"),n=e.pageX-t.getBoundingClientRect().left,i=e.pageY-t.getBoundingClientRect().top;n>=577&&(t.style.width=n.toString()+"px"),i>=268&&(t.style.height=i.toString()+"px")};new WindowResizer;class FileSystem{__fetchFileSystem(){}getDiretory(e){let t=this.structure,n=t;for(let i=0;i<e.length;++i)try{if(!(n=t[e[i]]))try{if(n=t,!(n=t[e[i]+"/"]))return!1;t=n}catch(e){return!1}t=n}catch(e){return!1}return t}addDirectory(e,t){[].push(t)}____getDiretoryV2(e){let t=this.____fsv2;for(let n=0;n<e.length;++n)try{const i=t.content;for(let r=0;r<i.length;++r){if(i[r].name!==e[n].trim()&&i[r].name!==e[n].trim()+"/")return!1;t=i[r]}}catch(e){return!1}return t}get ____fsv2(){return new SystemDirectoryModel("root/",[new SystemDirectoryModel("portfolioOS/",[new SystemDirectoryModel("documents/",[]),new SystemDirectoryModel("images/",[]),new SystemDirectoryModel("videos/",[]),new SystemDirectoryModel("music/",[])]),new SystemDirectoryModel("applications/",[new SystemDirectoryModel("system/",[new SystemApp("Explorer",`${IMG_PATH}folder.svg`,`${IMG_PATH}folder.svg`,console.log),new SystemApp("Terminal",`${IMG_PATH}terminal-green.svg`,`${IMG_PATH}terminal-white.svg`,console.log)]),new DirectoryModel(PermissionType.UserWrite,"appStore/",null,null,[new AppStoreApplication(FileSystemItemType.Executable,"Wikipedia Viewer","shivayl","https://rawgit.com/joao-neves95/freeCodeCampProjects/master/Wikipedia_Viewer_App/index.html")])]),new SystemDirectoryModel("users/",[new SystemDirectoryModel("local/",[new DirectoryModel(PermissionType.UserWrite,"desktop/",null,null,[]),new DirectoryModel(PermissionType.UserWrite,"documents/",null,null,[new FileModel(FileSystemItemType.File,PermissionType.UserDelete,"My Document","Hello World.")]),new DirectoryModel(PermissionType.UserWrite,"images/",null,null,[new FileModel(FileSystemItemType.FileUrl,PermissionType.UserDelete,"My Image","www")]),new DirectoryModel(PermissionType.UserWrite,"videos/",null,null,[]),new DirectoryModel(PermissionType.UserWrite,"music/",null,null,[]),new DirectoryModel(PermissionType.UserRead,"shared/",null,null,[])]),new DirectoryModel(PermissionType.Admin,"public/",null,FileSystemItemType.ExecutableDirectory,[])])])}get structure(){return{"root/":{"portfolioOS/":{"documents/":[new FileModel(FileSystemItemType.File,PermissionType.UserRead,"My Document","Hello World.")],"images/":[new FileModel(FileSystemItemType.FileUrl,PermissionType.UserRead,"My Image","www")],"videos/":[new FileModel(FileSystemItemType.FileUrl,PermissionType.UserRead,"My Video","www")],"music/":[]},"applications/":{"system/":[new SystemApp("Terminal","","",console.log),new SystemApp("Explorer","","",console.log)],"appStore/":[new AppStoreApplication(FileSystemItemType.Executable,"Wikipedia Viewer","shivayl","https://rawgit.com/joao-neves95/freeCodeCampProjects/master/Wikipedia_Viewer_App/index.html")]},"users/":{"local/":{"documents/":[new FileModel(FileSystemItemType.File,PermissionType.UserDelete,"My Document","Hello World.")],"images/":[new FileModel(FileSystemItemType.FileUrl,PermissionType.UserDelete,"My Image","www")],"videos/":[new FileModel(FileSystemItemType.FileUrl,PermissionType.UserDelete,"My Video","www")],"music/":[],"shared/":[],"trash/":[]},"public/":[]}}}}}const fileSystem=new FileSystem;class TaskbarIcon{constructor(e,t){this.id=TaskbarIcon.idPrefix+e,this.windowId=e,this.iconContainerElem=document.getElementById("icon-container"),this.iconUrl=IMG_PATH+"default-taskbar-icon-white.svg",this.isMinimized=Boolean,t&&(this.iconUrl=t),this.init()}static get idPrefix(){return"icn_"}get template(){return`\n      <li id="${this.id}">\n        <img src="${this.iconUrl}" alt="Menu Icon" class="icon" />\n      </li>`}init(){this.iconContainerElem.innerHTML+=this.template,this.isMinimized=!1}kill(){document.getElementById(this.id).remove()}minimized(){document.getElementById(this.id).classList.add("minimized"),this.isMinimized=!0}maximized(){document.getElementById(this.id).classList.remove("minimized"),this.isMinimized=!1}}const START_MENU_ANIM_DELAY=1;class TaskbarManager{constructor(){this.iconContainerElem=document.getElementById("icon-container"),this.icons=new Dictionary}addIcon(e,t){const n=new TaskbarIcon(e,t);return this.icons.add(TaskbarIcon.idPrefix+e,n),n}killIcon(e){this.findIconInstance(e).kill(),this.icons.remove(TaskbarIcon.idPrefix+e)}minimizedIcon(e){this.findIconInstance(e).minimized()}maximizedIcon(e){this.findIconInstance(e).maximized()}findIconInstance(e){return this.icons.getByKey(TaskbarIcon.idPrefix+e)}}const taskbarManager=new TaskbarManager;class Window{constructor(e,t,n){this.id=`${Window.idPrefix}${e}`,this.title=t,this.content=n,this.icon=TaskbarIcon,this.isMinimized=!1,this.init()}get element(){return document.getElementById(this.id)}static get idPrefix(){return"win-"}get template(){return`\n      <article class="window-manager grid-y resizable" id="${this.id}">\n        <header class="toolbar">\n          <div class="grid-x">\n            <div class="cell small-8 medium-8 large-8">\n              <p class="window-title free-draggable">${this.title}</p>\n            </div>\n            <div class="cell auto"></div>\n            <div class="cell small-1 medium-1 large-1 icon-wrap">\n              <img src="${IMG_PATH}minimize-white.svg" alt="Minimize Window Icon" class="minimize-window icon" />\n            </div>\n            <div class="cell small-1 medium-1 large-1 icon-wrap">\n              <img src="${IMG_PATH}maximize-white.svg" alt="Maximize Window Icon" class="max-size-window icon" />\n            </div>\n            <div class="cell small-1 medium-1 large-1 icon-wrap">\n              <img src="${IMG_PATH}close-white.svg" alt="Close Window Icon" class="close-window icon" />\n            </div>\n          </div>\n        </header>\n        <section class="content">\n          ${this.content}\n        </section>\n        <div class="resizer"></div>\n      </article>`}static modalTemplate(e){return`\n      <div class="reveal" id="modal" data-reveal>\n        ${e}\n        <button class="close-button" data-close aria-label="Close modal" type="button">\n          <span aria-hidden="true">&times;</span>\n        </button>\n      </div>`}init(){document.getElementById("window-manager-container").innerHTML+=this.template}kill(){this.element.remove()}minimize(){this.element.style.display="none",this.isMinimized=!0}unminimize(){this.element.style.display="block",this.isMinimized=!1}maxSize(){this.element.style.width="100%",this.element.style.height="92%",this.element.style.top="0%",this.element.style.left="0%"}}class WindowManager{constructor(){this.windows=new Dictionary}openNewWindow(e,t=""){const n=processManager.getAppInstance(e);this.openNewWindowCustom(e,n.name,t,!0,n.taskbarIconUrl)}openNewWindowCustom(e,t,n="",i=!1,r=null,s=null,o=null){const a=new Window(e,t,n);if(i){const e=taskbarManager.addIcon(a.id,r);a.icon=e}this.windows.add(a.id,a),this.updateListeners(),dragAndDrop.cancelNonDraggableElements(),dragAndDrop.updateFreeDraggListeners(),windowResizer.updateListeners();const l=document.getElementById(a.id);l.style.width=s||"70%",l.style.height=o||"80%",l.classList.add("anim"),l.classList.add("zoom-in"),setTimeout(()=>{l.classList.remove("anim"),l.classList.remove("zoom-in")},1e3)}closeWindow(e){this.findWindowInstance(e).kill(),taskbarManager.killIcon(e),this.windows.remove(e),this.updateListeners()}minimizeWindow(e){this.findWindowInstance(e).minimize(),taskbarManager.minimizedIcon(e)}unminimizeWindow(e){this.findWindowInstance(e).unminimize(),taskbarManager.maximizedIcon(e)}maxSizeWindow(e){this.findWindowInstance(e).maxSize()}updateListeners(){const e=document.querySelectorAll('[id^="win-"] .close-window');for(let t=0;t<e.length;t++)e[t].removeEventListener("click",this.closeWindowHandler),e[t].addEventListener("click",n=>{this.closeWindowHandler(n,e[t])});const t=document.querySelectorAll('[id^="win-"] .minimize-window');for(let e=0;e<t.length;e++)t[e].removeEventListener("click",this.minimizeWindowHandler),t[e].addEventListener("click",n=>{this.minimizeWindowHandler(n,t[e])});const n=document.querySelectorAll('[id^="win-"] .max-size-window');for(let e=0;e<t.length;e++)n[e].removeEventListener("click",this.maxSizeWindow),n[e].addEventListener("click",t=>{this.maxSizeWindowHandler(t,n[e])});const i=document.querySelectorAll('[id^="icn_"] .icon');for(let e=0;e<i.length;e++)i[e].removeEventListener("click",this.taskbarIconsHandler),i[e].addEventListener("click",t=>{this.taskbarIconsHandler(t,i[e])})}closeWindowHandler(e,t){e.stopPropagation();const n=DomUtils.getParentByIdInclude(t,"win-");this.closeWindow(n.id)}minimizeWindowHandler(e,t){e.stopPropagation();const n=DomUtils.getParentByIdInclude(t,"win-");this.minimizeWindow(n.id)}maxSizeWindowHandler(e,t){e.stopPropagation();const n=DomUtils.getParentByIdInclude(t,"win-");this.maxSizeWindow(n.id)}taskbarIconsHandler(e,t){e.stopPropagation();const n=DomUtils.getParentByIdInclude(t,"icn_win-").id,i=Utils.parseIDs(n)[1];this.findWindowInstance(i).isMinimized?this.unminimizeWindow(i):this.minimizeWindow(i)}openNewModal(e){document.getElementById("window-manager-container").innerHTML+=Window.modalTemplate(e),$("#modal").foundation(),$("#modal").foundation("open"),document.querySelector("[data-reveal]").addEventListener("closed.zf.reveal",()=>{console.debug("jgx"),this.updateListeners(),this.updateFreeDraggListeners()})}findWindowInstance(e,t){const n=this.windows.getByKey(e);return t?t(n):n}}const windowManager=new WindowManager;class UserAppsManager{constructor(){this.installedApps=[]}fetchAllInstalledApps(){}}class SystemAppsManager{constructor(){this.systemApps=new Dictionary}bindApplication(e,t,n,i){const r=new SystemApp(e,t,n,i);this.systemApps.add(e,r)}executeApplication(e,t){const n=this.systemApps.getByKey(e);n?n.executeFunction(t):console.error("Application not found ")}getAppInstance(e){return this.systemApps.getByKey(e)}getAllApps(){return this.systemApps.getAllValues()}}const systemAppsManager=new SystemAppsManager;class Trash{constructor(e){this.id=`trash-${e}`,this.processId=e,this.items=[],this.init()}init(){windowManager.openNewWindow(this.processId,terminalTemplates.window(this.id))}}class TerminalTemplates{constructor(){this.lineContent=""}get welcomeMessage(){return"Welcome to the Portfolio - OS Terminal!"}window(e){return`\n      <section class="grid-y terminal" id="${e}">\n      \n      </section>\n    `}addLine(){return`\n        <article class="grid-x input-group line">\n          ${this.lineContent}\n        </article>\n      `}withInfo(e="",t=""){return this.lineContent=`\n      <p class="info ${t}">${e}<p>\n    `,this}withLastInput(e=""){return this.lineContent=`\n      <label class="cell medium-1 middle input-icon">&gt;</label>\n      <p class="cell medium-11 no-border input" type="text" autofocus>${e}<p>\n    `,this}withInput(){return this.lineContent='\n      <label class="cell medium-1 middle input-icon">&gt;</label>\n      <input id="active-input" class="cell medium-11 no-border input" type="text" autofocus>\n    ',this}}const terminalTemplates=new TerminalTemplates,initAnimMessage=terminalTemplates.welcomeMessage,INIT_ANIM_DELAY=50;class Terminal{constructor(e){this.id=`terminal-${e}`,this.processId=e,this.initAnimTarget=HTMLElement,this.initAnimI=0,this.currentInput="",this.currentDir=fileSystem.structure["root/"],this.currentDirName="root/",this.currentPath=["root/"],this.commandHistory=new List("string"),this.currentCmdHistIndex=0,this.insertedLastCmd=!1,this.maxCommandHistoryLength=10,this.init()}get element(){return document.getElementById(this.id)}get activeInput(){return document.getElementById("active-input")}init(){windowManager.openNewWindow(this.processId,terminalTemplates.window(this.id)),this.element.innerHTML+=terminalTemplates.withInfo().addLine(),this.element.addEventListener("click",()=>{this.__focusActiveInput()}),this.initAnimTarget=document.querySelector(`#${this.id} > .line > .info`),this.__typeWriterAnimation()}__typeWriterAnimation(){this.initAnimI<initAnimMessage.length?(this.initAnimTarget.innerHTML+=initAnimMessage[this.initAnimI],++this.initAnimI,setTimeout(this.__typeWriterAnimation.bind(this),INIT_ANIM_DELAY)):(this.initAnimI=0,setTimeout(()=>{this.addNewInput()},500))}__deativateLastInput(e=null,t=""){const n=this.activeInput;n&&(e||(e=this.currentInput),DomUtils.getParentByClassInclude(n,"grid-x input-group line").remove(),this.element.innerHTML+=terminalTemplates.withLastInput(e).addLine(),""!==t&&(this.element.innerHTML+=terminalTemplates.withInfo(t).addLine()))}log(e){this.element.innerHTML+=terminalTemplates.withInfo(e).addLine()}__addCurrentDirLine(){this.element.innerHTML+=terminalTemplates.withInfo(this.currentPath.join(""),"current-path").addLine()}addNewInput(){this.__addCurrentDirLine(),this.element.innerHTML+=terminalTemplates.withInput().addLine();const e=this.activeInput;this.__focusActiveInput(),this.element.removeEventListener("focus",this.__focusActiveInput,!0),this.element.addEventListener("focus",this.__focusActiveInput,!0),this.element.removeEventListener("click",this.__focusActiveInput,!0),this.element.addEventListener("click",this.__focusActiveInput,!0),e.addEventListener("blur",this.__focusActiveInput,!0),e.addEventListener("keydown",t=>{13===t.keyCode?(this.currentInput=e.value,this.executeCommand(t)):38===t.keyCode?this.givePreviousCommand(t,"previous"):40===t.keyCode&&this.givePreviousCommand(t,"next")})}__focusActiveInput(){this.activeInput&&this.activeInput.focus()}executeCommand(e){e.preventDefault();const t=this.parseInput(this.currentInput),n=t.cmd,i=t.value;switch(this.__deativateLastInput(),n.toUpperCase()){case"CLEAR":case"CLS":this.clear();break;case"DIR":case"LS":this.listCurrentDirectory();break;case"CD":i[0]?".."===i[0]||"--"===i[0]?this.previousDirectory():"/"===i[0]||"\\"===i[0]?this.goToRoot():this.changeDirectory([i[0]]):this.log(this.currentDirName);break;case"CD..":case"CD-":this.previousDirectory();break;case"CD/":case"CD\\":this.goToRoot();break;case"HELP":case"H":this.printHelp();break;case"RUN":break;default:this.log(`"${n}" is not recognized as an internal or external command, operable program or executable file.`)}this.__commandHistoryController(this.currentInput),this.currentCmdHistIndex=this.commandHistory.length-1,this.insertedLastCmd=!1,this.addNewInput()}givePreviousCommand(e,t){e.preventDefault(),this.insertedLastCmd&&(this.currentCmdHistIndex>0&&"previous"===t?--this.currentCmdHistIndex:this.currentCmdHistIndex<this.commandHistory.length-1&&"next"===t&&++this.currentCmdHistIndex);const n=this.commandHistory.get(this.currentCmdHistIndex);void 0!==n&&(this.activeInput.value=n),this.insertedLastCmd=!0}printHelp(){this.log("Commands: </br>\n       CD => Goes to a provided directory, or displays the current directory name</br>\n       CD.. (or) CD- => Goes to the previous directory</br>\n       CD/ (or) CD\\ => Goes to root</br>\n       CLEAR (or) CLS => Clear all previous console entries\n       DIR (or) LS => Lists all the files and subdirectories in the current directory</br>")}listCurrentDirectory(){let e="";for(let t in this.currentDir)"object"==typeof this.currentDir[t]&&(this.currentDir[t]instanceof FileModel?e+=this.currentDir[t].name+"<br>":this.currentDir[t]instanceof DirectoryModel?e+=this.currentDir[t].name+"/<br>":e+=t+"<br>");this.log(e)}goToRoot(){this.currentPath=["root/"],this.currentDirName="root/",this.currentDir=fileSystem.structure["root/"]}changeDirectory(e){let t;t="root/"===(e=e[0].split("/"))[0]||"root"===e[0]?e:this.currentPath.slice().concat(e);const n=fileSystem.getDiretory(t);if(!n)return this.log(`'${e.join("/")}' is not a valid directory name.`);for(let e=0;e<t.length;++e)t[e].endsWith("/")||(t[e]+="/");this.currentDirName=t[t.length-1],this.currentPath=t,this.currentDir=n}previousDirectory(){"root/"!==this.currentDirName&&(this.currentPath.pop(),this.currentDirName=this.currentPath.last(),this.currentDir=fileSystem.getDiretory(this.currentPath))}clear(){this.element.innerHTML=""}createFile(){}__commandHistoryController(e){this.commandHistory.length>=this.maxCommandHistoryLength&&this.commandHistory.remove(0),this.commandHistory.add(e)}parseInput(e){const t=e.split(/\s/);return{cmd:t[0],value:t.slice(1,t.length)}}}class AddNewAppTemplates{constructor(){throw new Error("Can not instantiate the static class AddNewAppTemplate.")}static get content(){return`\n      <form class="grid-container add-new-app">\n        <section class="grid-x wrapper" >\n\n          <div class="cell">\n            <h5>Application Name</h5>\n            <input type="text" name="name" required>\n          </div>\n\n          <div class="cell">\n            <h5>Descrition</h5>\n            <textarea type="text" name="description"></textarea>\n          </div>\n\n          <div class="cell">\n            <h5>Index HTML Page</h5>\n            <input type="text" name="index-page" required>\n          </div>\n\n          <div class="cell">\n            <button class="button help" data-open="modal">Help</button>\n            ${MyProfileTemplates.button("Submit App")}\n          </div>\n\n        </section>\n      </form>\n    `}static get helpModalContent(){return"\n      <h1>Help</h1>\n      <ul>\n        <li>\n          For security reasons, Portfolio-OS only accepts apps stored on GitHub.\n          To add a new app just go to the GitHub file and click on RAW.\n          Then just copy and paste the link to Index HTML Page input.\n        </li>\n      </ul>"}}class AddNewAppModel{constructor(){this.isOpen=!1}}class AddNewAppController{constructor(){this.model=new AddNewAppModel}openWindow(){if(this.model.isOpen)return;const e=Utils.randomString(4);windowManager.openNewWindowCustom(e,"Add New App",AddNewAppTemplates.content,!1,null,"30%","65%"),this.model.isOpen=!0,DomUtils.get(`#${Window.idPrefix}${e} .help`).addEventListener("click",()=>{windowManager.openNewModal(AddNewAppTemplates.helpModalContent)}),DomUtils.get(`#${Window.idPrefix}${e} .close-window`).addEventListener("click",()=>{this.model.isOpen=!1})}}class AppStoreTemplates{static window(e){return`\n      <section class="grid-x app-store" id="${e}">\n\n        <div class="top-bar">\n          <div class="top-bar-left">\n            <ul class="dropdown menu" data-dropdown-menu>\n              <li>\n                <a href="#">Explore</a>\n                <ul class="menu vertical">\n                  <li><a href="#">Top Rated</a></li>\n                  <li><a href="#">Newest Apps</a></li>\n                </ul>\n              </li>\n              <li><a href="#" class="add-new">Add New App</a></li>\n            </ul>\n          </div>\n          <div class="top-bar-right">\n            <ul class="menu">\n              <li><input type="search" placeholder="Search"></li>\n              <li><button type="button" class="button">Search</button></li>\n            </ul>\n          </div>\n        </div>\n\n        <div class="grid-container fluid content">\n          <div class="grid-x content-grid">\n            ${this.appCard("1","Wikipedia Viewer","shivayl","https://raw.githubusercontent.com/joao-neves95/freeCodeCampProjects/master/Wikipedia_Viewer_App/index.html",1/0,0,"The Wikipedia Viewer enables you to search wikipedia in an enjoyable fashion.")+this.appCard("1","Wikipedia Viewer","shivayl","https://raw.githubusercontent.com/joao-neves95/freeCodeCampProjects/master/Wikipedia_Viewer_App/index.html",1/0,0,"The Wikipedia Viewer enables you to search wikipedia in an enjoyable fashion.")+this.appCard("1","Wikipedia Viewer","shivayl","https://raw.githubusercontent.com/joao-neves95/freeCodeCampProjects/master/Wikipedia_Viewer_App/index.html",1/0,0,"The Wikipedia Viewer enables you to search wikipedia in an enjoyable fashion.")+this.appCard("1","Wikipedia Viewer","shivayl","https://raw.githubusercontent.com/joao-neves95/freeCodeCampProjects/master/Wikipedia_Viewer_App/index.html",1/0,0,"The Wikipedia Viewer enables you to search wikipedia in an enjoyable fashion.")+this.appCard("1","Wikipedia Viewer","shivayl","https://raw.githubusercontent.com/joao-neves95/freeCodeCampProjects/master/Wikipedia_Viewer_App/index.html",1/0,0,"The Wikipedia Viewer enables you to search wikipedia in an enjoyable fashion.")+this.appCard("1","Wikipedia Viewer","shivayl","https://raw.githubusercontent.com/joao-neves95/freeCodeCampProjects/master/Wikipedia_Viewer_App/index.html",1/0,0,"The Wikipedia Viewer enables you to search wikipedia in an enjoyable fashion.")+this.appCard("1","Wikipedia Viewer","shivayl","https://raw.githubusercontent.com/joao-neves95/freeCodeCampProjects/master/Wikipedia_Viewer_App/index.html",1/0,0,"The Wikipedia Viewer enables you to search wikipedia in an enjoyable fashion.")+this.appCard("1","Wikipedia Viewer","shivayl","https://raw.githubusercontent.com/joao-neves95/freeCodeCampProjects/master/Wikipedia_Viewer_App/index.html",1/0,0,"The Wikipedia Viewer enables you to search wikipedia in an enjoyable fashion.")}\n          </div>\n        </div>\n\n      </section>\n    `}static appCard(e,t,n,i,r,s,o){return`\n      <div class="cell">\n        <div class="card app-card" id="${e}">\n          <div class="card-divider">\n            <h4>${t}</h4>\n          </div>\n          <img src="">\n          <div class="card-section">\n            <p>${o}</p>\n            <p class="meta">Creator: ${n}</p>\n            <p class="meta">Downloads: ${r}</p>\n            <p class="meta">Vote Ratio: ${s}</p>\n            <a href="${i}" target="_blank" class="primary button">View on GitHub</a>\n            <button type="button" class="install primary button">Install</button>\n          </div>\n        </div>\n      </div>\n    `}static appDescriptionModal(){return"\n    "}}class AppStoreModel{constructor(){this.processId="",this.id=""}}class AppStoreView{constructor(){}}class AppStoreController{constructor(e){this.model=new AppStoreModel,this.view=new AppStoreView,this.addNewAppController=new AddNewAppController,this.model.processId=e,this.model.id=`app-store-${e}`,this.init(),Object.freeze(this)}init(){windowManager.openNewWindow(this.model.processId,AppStoreTemplates.window(this.model.id)),$(`#${this.model.id} .dropdown`).foundation(),DomUtils.get(`#${this.model.id} .add-new`).addEventListener("click",e=>{e.preventDefault(),this.addNewAppController.openWindow()})}}class AppStore{constructor(e){this.processId=e,this.controller=new AppStoreController(e)}}class MyProfileTemplates{constructor(){throw new Error("Can not instantiate the static class MyProfileTemplates")}static get linkSocialAccounts(){return'\n      <div class="grid-x">\n        <div class="cell large-4 large-offset-2">\n          <a href="/portfolio-os/auth/google" class="link-account">\n            <span class="hint--top hint--bounce" aria-label="Link Google Account.">\n              <span class="hint--bottom hint--warning hint--bounce" aria-label="WARNING: This overrides any current linked Google account.">\n                <img src="img/google-plus.svg" alt="Google-Plus Icon" class="icon" id="google-btn" />\n              </span>\n            </span>\n          </a>\n        </div>\n        <div class="cell large-4">\n          <a href="/portfolio-os/auth/github" class="link-account">\n            <span class="hint--top hint--bounce" aria-label="Link GitHub Account.">\n              <span class="hint--bottom hint--warning hint--bounce" aria-label="WARNING: This overrides any current linked GitHub account.">\n                <img src="img/github.svg" alt="Github Icon" class="icon" draggable="false" />\n              </span>\n            </span>\n          </a>\n        </div>\n      </div>\n    '}static get addLink(){return`\n      <div class="grid-x">\n        <div class="medium-2 cell link-label-wrapper">\n          <label>Website\n            <select>\n              <option value="${HostId.GitHub}">GitHub</option>\n              <option value="${HostId.Behance}">Behance</option>\n              <option value="${HostId.Twitter}">Twitter</option>\n              <option value="${HostId.Instagram}">Instagram</option>\n            </select>\n          </label>\n        </div>\n        <div class="medium-9 cell link-slug-wrapper">\n          <label>Path\n            <input class="slug new-link" type="text" placeholder="john-doe">\n          </label>\n        </div>\n      </div>\n    `}static get newSkillInput(){return'\n      <input class="new-skill" type="text" placeholder="Saying foo and bar">\n    '}static button(e,t=""){return`\n      <button type="button" class="success button ${t}">${e}</button>\n    `}}class MyProfileModel{constructor(){this.userId}async updateSummary(e){return await HttpClient.put(`${API_ROOT_PATH}user/profile/summary`,{summary:CommonUtils.sanitizeHTML(e)})}async postNewSkill(e){return await HttpClient.post(`${API_ROOT_PATH}user/profile/skills`,{skill:CommonUtils.sanitizeHTML(e)})}async updateSkill(e,t){return await HttpClient.put(`${API_ROOT_PATH}user/profile/skills/${CommonUtils.sanitizeHTML(e)}`,{skill:CommonUtils.sanitizeHTML(t)})}async deleteSkill(e){return await HttpClient.delete(`${API_ROOT_PATH}user/profile/skills/${CommonUtils.sanitizeHTML(e)}`)}async postNewLink(e,t){return await HttpClient.post(`${API_ROOT_PATH}user/profile/links`,{hostId:CommonUtils.sanitizeHTML(e),urlPath:CommonUtils.sanitizeHTML(t)})}async updateLink(e,t){return await HttpClient.put(`${API_ROOT_PATH}user/profile/links/${CommonUtils.sanitizeHTML(e)}`,{newPath:CommonUtils.sanitizeHTML(t)})}async deleteLink(e){return await HttpClient.delete(`${API_ROOT_PATH}user/profile/links/${CommonUtils.sanitizeHTML(e)}`)}}class MyProfileView{constructor(){this.target=HTMLElement}get summaryElem(){return this.target.getElementsByTagName("textarea")[0]}activateProfileEdition(){const e=this.target.getElementsByTagName("input");for(let t=0;t<e.length;++t)e[t].classList.remove("disabled-input"),e[t].disabled=!1;const t=this.summaryElem;t.classList.remove("disabled-input"),t.disabled=!1,this.target.getElementsByClassName("links-container")[0].insertAdjacentHTML("beforeend",MyProfileTemplates.button("Add Link","add-link-btn")),this.target.getElementsByClassName("skills-container")[0].insertAdjacentHTML("beforeend",MyProfileTemplates.button("Add Skill","add-skill-btn"));const n=this.target.getElementsByClassName("close-button");for(let e=0;e<n.length;++e)n[e].classList.remove("disabled");document.getElementById("link-social-accounts-wrapper").innerHTML=MyProfileTemplates.linkSocialAccounts}}class MyProfileController{constructor(){this.model=new MyProfileModel,this.view=new MyProfileView}initPage(e){this.view.target=e,this.view.activateProfileEdition(),this.____addEventListeners()}____addEventListeners(){Array.from(this.view.target.getElementsByClassName("link-account")).forEach(e=>{e.addEventListener("click",e=>{let t;t=e.target.parentElement.parentElement.parentElement.href.includes("/portfolio-os/auth/github")?LoginType.GitHub:LoginType.Google,authentication.JWTLocalStorageToCookie({accountType:t})})}),this.view.target.getElementsByClassName("add-link-btn")[0].addEventListener("click",e=>{e.preventDefault(),e.target.insertAdjacentHTML("beforebegin",ProfilesTemplates.removableElem(MyProfileTemplates.addLink)),Array.from(this.view.target.getElementsByClassName("new-link")).forEach(e=>{e.removeEventListener("blur",this.___updatePortfolioValue),e.addEventListener("blur",e=>{e.preventDefault(),this.___updatePortfolioValue(e)})})}),this.view.target.getElementsByClassName("add-skill-btn")[0].addEventListener("click",e=>{e.preventDefault(),e.target.insertAdjacentHTML("beforebegin",ProfilesTemplates.removableElem(MyProfileTemplates.newSkillInput)),Array.from(this.view.target.getElementsByClassName("new-skill")).forEach(e=>{e.removeEventListener("blur",this.___updatePortfolioValue),e.addEventListener("blur",e=>{e.preventDefault(),this.___updatePortfolioValue(e)})})}),Array.from(this.view.target.getElementsByClassName("close-button")).forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),this.___updatePortfolioValue(e)})}),this.view.summaryElem.addEventListener("blur",e=>{e.preventDefault(),this.___updatePortfolioValue(e)}),document.querySelectorAll('[id^="link_"].slug').forEach(e=>{e.addEventListener("blur",e=>{e.preventDefault(),this.___updatePortfolioValue(e)})}),document.querySelectorAll('[id^="skill_"].skill').forEach(e=>{e.addEventListener("blur",async e=>{e.preventDefault(),await this.___updatePortfolioValue(e)})})}async ___updatePortfolioValue(e){const t=e.target,n=t.id;if(n.startsWith("link_")){if(""===t.value)return;await this.model.updateLink(n.substring(5),t.value)}else if(n.startsWith("skill_")){if(""===t.value)return;await this.model.updateSkill(n.substring(6),t.value)<=0&&console.info("Error updating skill")}else if(t.className.includes("new-skill")){const e=await this.model.postNewSkill(t.value);t.id="skill_"+e.id}else if(t.className.includes("new-link")){const e=await this.model.postNewLink(t.parentElement.parentElement.parentElement.firstElementChild.firstElementChild.firstElementChild.value,t.value);t.id="link_"+e.id}else if(t.parentElement.className.includes("close-button")){if(t.className.includes("disabled"))return;const e=t.parentElement.parentElement;let n;(n=e.firstElementChild.classList.contains("skill")||e.firstElementChild.classList.contains("new-skill")?await this.model.deleteSkill(e.firstElementChild.id.substring(6)):await this.model.deleteLink(e.firstElementChild.lastElementChild.firstElementChild.firstElementChild.id.substring(5)))<=0?console.info("Error Deleting."):e.remove()}else t.className.includes("summary")&&await this.model.updateSummary(t.value)}}class UserProfilesController{constructor(){}initPage(){}}class ProfilesTemplates{static window(e){return`\n      <section class="grid-y profiles" id="${e}">\n\n        <div class="cell top-bar stacked-for-medium">\n          <div class="top-bar-left">\n            <ul class="dropdown menu" data-dropdown-menu>\n              \x3c!-- <li class="menu-text">Site Title</li> --\x3e\n              <li><a href="#" class="my-profile-btn">My Profile</a></li>\n              <li><a href="#" class="explore-btn">Explore</a></li>\n            </ul>\n          </div>\n          <div class="top-bar-right">\n            <ul class="menu">\n              <li><input type="search" placeholder="Search for someone"></li>\n              <li><button type="button" class="button">Search</button></li>\n            </ul>\n          </div>\n        </div>\n\n        <div class="cell content" id="cntnt_${e}">\n        </div>\n\n      </section>\n    `}static userProfile(e,t,n,i){let r="";for(let e=0;e<i.length;++e)r+=ProfilesTemplates.removableElem(ProfilesTemplates.disabledInput(i[e].name,"skill_"+i[e].id,"skill"),!0);let s="";for(let e=0;e<n.length;++e)s+=ProfilesTemplates.removableElem(ProfilesTemplates.link(n[e].id,n[e].hostlabel,n[e].hosturl,n[e].urlpath),!0);return`\n      <form class="grid-container my-profile">\n        <div class="grid-y inner-my-profile">\n\n          <div class="cell block-item">\n            <div id="name-wrapper">\n              <h5>Name</h5><br/>\n              <p>${e}</p>\n            </div>\n            <div id="link-social-accounts-wrapper">\n            </div>\n          </div>\n\n          <div class="cell block-item">\n            <h5>Summary</h5>\n            <textarea class="summary disabled-input" disabled="true">${t}</textarea>\n          </div>\n\n          <div class="cell block-item links-container">\n            <h5>Around The Web</h5>\n            ${s}\n          </div>\n\n          <div class="cell block-item skills-container">\n            <h5>Skill Set</h5>\n            ${r}\n          </div>\n\n          <div class="cell block-item skills-container">\n            <h5>Images</h5>\n          </div>\n          <div class="cell block-item skills-container">\n            <h5>Videos</h5>\n          </div>\n          <div class="cell block-item skills-container">\n            <h5>Documents</h5>\n          </div>\n          <div class="cell block-item skills-container">\n            <h5>Music</h5>\n          </div>\n\n        </div>\n      </form>\n    `}static removableElem(e,t=!1){return`\n      <div class="callout">\n        ${e}\n        <button class="close-button ${t=t?"disabled":""}" type="button">\n          <span aria-hidden="true">&times;</span>\n        </button>\n      </div>\n    `}static disabledInput(e="",t="",n=""){return`\n      <input id="${t}" class="disabled-input ${n}" type="text" value="${e}" disabled="true">\n    `}static link(e,t,n,i){return`\n      <div class="grid-x">\n        <div class="medium-2 cell link-label-wrapper">\n          <label class="lbl">Website</label>\n          <a class="pointer" href="https://${n}/${i}" target="_blank">\n            <p>${t}</p>\n          </a>\n        </div>\n        <div class="medium-9 cell link-slug-wrapper">\n          <label class="lbl">Slug\n            <input id="link_${e}" class="slug disabled-input" type="text" value="${i}" disabled="true">\n          </label>\n        </div>\n      </div>\n    `}static profileCard(){return"\n    "}}class ProfilesModel{constructor(){this.currentPage=ProfilePageType.MyProfile}async getThisUserProfile(){try{return await HttpClient.get(`${SERVER_ROOT_PATH}portfolio-os/api/user/profile`)}catch(e){console.error(e)}}async getUserProfile(e){return await HttpClient.get(`${SERVER_ROOT_PATH}portfolio-os/api/users/${e}/profile`)}}class ProfilesView{constructor(){}contentTarget(e){return document.getElementById(e).querySelector('[id^="cntnt_"] ')}injectContent(e,t){this.contentTarget(e).innerHTML=t}}class Profiles{constructor(e){this.id=`profiles-${e}`,this.processId=e,this.model=new ProfilesModel,this.view=new ProfilesView,this.myProfileController=new MyProfileController,this.userProfilesController=new UserProfilesController,this.init(),Object.freeze(this)}async init(){windowManager.openNewWindow(this.processId,ProfilesTemplates.window(this.id)),await this.injectMyProfile(),DomUtils.get(`#${this.id} .my-profile-btn`).addEventListener("click",e=>{e.preventDefault(e),this.injectMyProfile()}),DomUtils.get(`#${this.id} .explore-btn`).addEventListener("click",e=>{e.preventDefault(e),this.injectExploreProfiles(e)})}async injectMyProfile(){const e=await this.model.getThisUserProfile();this.view.injectContent(this.id,ProfilesTemplates.userProfile(e.name,e.summary,e.socialLinks,e.skillSet)),this.myProfileController.initPage(this.view.contentTarget(this.id)),this.model.currentPage=ProfilePageType.MyProfile}async injectUserProfile(e){await this.model.getUserProfile(1);this.view.injectContent(this.id,ProfilesTemplates.userProfile("João Neves","I am a programmer.",[["1","Github","github.com","joao-neves95"]],["C#, .NET, ASP.NET Core","JavaScript, Node.js"])),this.model.currentPage=ProfilePageType.UserProfiles}injectExploreProfiles(){this.model.currentPage=ProfilePageType.Explore}}class ExplorerTemplates{constructor(){throw new Error('Con not intantiate static class "ExplorerTemplates"')}static get inputIconPrefix(){return"input-icn_"}static get contentPrefix(){return"cntnt_"}static get treeNavElem(){return document.getElementById("exporer-tree-nav")}static window(e){return`\n      <section class="grid-y explorer" id="${e}">\n        <header class="cell">\n          <div class="input-group">\n            <span class="input-group-label"><img class="input-icn" id="${ExplorerTemplates.inputIconPrefix}${e}" src="${IMG_PATH}folder.svg" alt="${e} Input Icon"></span>\n            <input class="input-group-field" type="text">\n          </div>\n        </header>\n        <div class="cell exp-content">\n          <div class="grid-x">\n            <nav id="exporer-tree-nav">\n            </nav>\n            <section id="${ExplorerTemplates.contentPrefix}${e}">\n            </section>\n          </div>\n        <div>\n      </section>\n    `}}class ExplorerModel{constructor(){this.processId="",this.id="",this.treeNav={},Object.seal(this)}initTreeNav(){this.treeNav=new VanillaTree(ExplorerTemplates.treeNavElem,{contextmenu:[{label:"",action:e=>{}}]}),this.treeNav.add({label:"root/",id:"root/",opened:!0}),this.treeNav.add({label:"portfolioOS/",parent:"root/",id:"portfolioOS/",opened:!0}),this.treeNav.add({label:"users/",parent:"portfolioOS/",id:"users/",opened:!0}),this.treeNav.add({label:"local/",parent:"users/",id:"local/",opened:!0}),this.treeNav.add({label:"public/",parent:"users/",id:"public/",opened:!0}),this.treeNav.add({label:"applications/",parent:"root/",id:"applications/",opened:!0})}}class ExplorerView{constructor(){Object.freeze(this)}element(e){return document.getElementById(e)}contentTarget(e){return element(e).querySelector(`[id^='${ExplorerTemplates.contentPrefix}']`)}injectContent(e,t){this.contentTarget(e).innerHTML=t}}class ExplorerController{constructor(e){this.model=new ExplorerModel,this.view=new ExplorerView,this.templates=ExplorerTemplates,this.model.id=`explorer-${e}`,this.model.processId=e,this.init(),Object.freeze(this)}init(){windowManager.openNewWindow(this.model.processId,this.templates.window(this.model.id)),this.model.initTreeNav()}}class Explorer{constructor(e){this.processId=e,this.controller=new ExplorerController(e)}}class ShivaylCV{constructor(e){windowManager.openNewWindow(e,this.window("shivayl-cv_"+e))}window(e){return`\n      <section class="grid-x shivayl-cv" id="${e}">\n        <img src="${IMG_PATH}shivayl-cv.png" alt="Shivayl CV Icon" title="Shivayl CV" />\n      </section>\n    `}}class Process{constructor(e){this.id=Utils.randomString(5),this.name=e}}class ProcessManager{constructor(){this.activeProcesses=new Dictionary}launchNewProcess(e){const t=new Process(e),n=systemAppsManager.getAppInstance(e);this.activeProcesses.add(t.id,n),systemAppsManager.executeApplication(e,t.id)}getActiveProcessesCount(){return this.activeProcesses.length}getAppInstance(e){return this.activeProcesses.getByKey(e)}}const processManager=new ProcessManager;class StartMenuApp{constructor(e,t){this.iconUrl=e,this.appName=t}get template(){return`\n      <li class="start-menu-icon">\n        <img src="${this.iconUrl}" alt="${this.appName} Icon" class="icon" /><label>${this.appName}</label>\n      </li>\n    `}}class StartMenuManager{constructor(){this.init(),this.active=!1}get element(){return document.getElementsByClassName("start-menu")[0]}get startMenuIcon(){return document.getElementsByClassName("menu-icon-wrap")[0]}get appContainerElem(){return document.getElementById("start-menu-apps")}init(){this.injectAllApps()}injectAllApps(){const e=systemAppsManager.getAllApps();this.appContainerElem.innerHTML="";for(let t=0;t<e.length;++t){const n=new StartMenuApp(e[t].startMenuIconUrl,e[t].name);this.appContainerElem.innerHTML+=n.template}this.updateListeners()}updateListeners(){this.startMenuIcon.addEventListener("click",()=>{const e=DomUtils.getStyle(this.element,"bottom");parseInt(e.substring(0,e.length-2))<48?this.show():this.hide()});const e=document.getElementsByClassName("start-menu-icon");for(let t=0;t<e.length;++t)e[t].addEventListener("click",e=>{const t=DomUtils.getDirectChildrenByTag(e.target,"label").innerText;processManager.launchNewProcess(t)})}show(){const e=this.element;e.classList.remove("anim"),e.classList.remove("start-menu-slide-down"),e.classList.add("anim"),e.classList.add("start-menu-slide-up"),this.active=!0}hide(){const e=this.element;e.classList.remove("anim"),e.classList.remove("start-menu-slide-up"),e.classList.add("anim"),e.classList.add("start-menu-slide-down"),this.active=!1}outsideClickGlobalEvent(e){const t=e.target;t.closest(".start-menu")||t.closest(".menu-icon-wrap")||!this.active||this.hide()}}const startMenuManager=new StartMenuManager;class DesktopTemplates{constructor(){this.iconTemplate=((e,t,n)=>(n||(n="Desktop Icon"),`\n        <figure class="desktop-icon draggable" id="${e}">\n          <img src="${t}" alt="${n}" class="unselectable icon" />\n          <label class="unselectable icon-label">${n}</label>\n        </figure>\n      `))}}const desktopTemplates=new DesktopTemplates;class DesktopIcon{constructor(e,t,n){this.id="d-icon-"+Utils.randomString(4),this.iconUrl=t,this.label=n,this.emptyCell=e,this.isSelected=Boolean,this.init(),this.getCellElem=(()=>document.getElementById(this.id).offsetParent)}get template(){return desktopTemplates.iconTemplate(this.id,this.iconUrl,this.label)}init(){this.emptyCell.innerHTML+=this.template,this.isSelected=!1}selected(){const e=document.getElementById(this.id);this.isSelected?e.classList.remove("selected"):e.classList.add("selected"),this.isSelected=!this.isSelected}}class DesktopManager{constructor(){this.rowCount=0,this.cellCount=0,this.icons=new Dictionary,this.rowIdsPrefix="dsktp-row_",this.cellIdsPrefix="dsktp-cell_",this.gridSystemConfig={gridType:GridType.GridY,cellWidthPercent:5,cellHeightPercent:10,gridXCount:0,gridYCount:0,target:document.getElementById("desktop"),rowIdsPrefix:this.rowIdsPrefix,cellIdsPrefix:this.cellIdsPrefix,additionalCellClasses:"desktop-cell",droppableCell:!0}}init(){const e=Utils.calculateGrid(5,15);this.rowCount=e.y,this.gridSystemConfig.gridYCount=e.y,this.cellCount=e.x,this.gridSystemConfig.gridXCount=e.x,gridSystem.insertGrid(this.gridSystemConfig)}insertNewIcon(e,t){const n=gridSystem.findEmptyCell(this.cellIdsPrefix,desktopManager.cellCount),i=new DesktopIcon(n,e,t);this.icons.add(i.id,i),this.updateListeners(),dragAndDrop.updateDraggables()}updateListeners(){const e=document.getElementsByClassName("desktop-icon");if(!e)return!1;for(let t=0;t<e.length;t++)e[t].classList.contains("clk")||(e[t].addEventListener("click",e=>{const t=e.target,n=DomUtils.getParentByTag(t,"figure");this.__findIconInstance(n.id,e=>{e.selected()})}),e[t].classList.add("clk")),e[t].classList.contains("dblclk")||(e[t].removeEventListener("dblclick",processManager.launchNewProcess),e[t].addEventListener("dblclick",e=>{const t=e.target,n=DomUtils.getDirectChildrenByTag(t,"img");processManager.launchNewProcess(n.alt)}),e[t].classList.add("dblclk"))}__findIconInstance(e,t){const n=this.icons.getByKey(e);if(!t)return n;t(n)}}const desktopManager=new DesktopManager;class ContextMenuTemplates{menuWindow(e=""){return`\n      <nav class="grid-y context-menu">\n        <ul>${e}</ul>\n      </nav>\n    `}menuItem(e){return`\n      <li class="item">${e}</li>\n    `}}const contextMenuTemplates=new ContextMenuTemplates;class ContextMenu{constructor(){this.menuBindings=new Dictionary,this.menuContent="",this.init()}get element(){return document.getElementsByClassName("context-menu")[0]}get menuTargetContainer(){return document.getElementById("window-manager-container")}init(){document.addEventListener("contextmenu",e=>{e.preventDefault(),this.contextMenu="";let t=e.target;for(let e=0;e<this.menuBindings.length;++e){if(DomUtils.getParentByClassInclude(t,this.menuBindings.getKeyByIndex(e))){const t=this.menuBindings.getByIndex(e);for(let e=0;e<t.length;++e)this.menuContent+=t[e];break}}""!==this.menuContent&&(this.element?(this.kill(e),this.inject(e)):this.inject(e))})}inject(e){this.menuTargetContainer.innerHTML+=contextMenuTemplates.menuWindow(this.menuContent),this.element.style.left=e.clientX+"px",this.element.style.top=e.clientY+"px"}kill(e){this.element&&(this.menuContent="",this.element.remove())}outsideClickGlobalEvent(e){e.target.closest(".context-menu")||this.kill(e)}bindItems(e,t){this.menuBindings.add(e,t)}}const contextMenu=new ContextMenu;class GlobalEvents{constructor(){this.clickEventFunctions=[]}init(){document.addEventListener("click",e=>{for(let t=0;t<this.clickEventFunctions.length;++t)this.clickEventFunctions[t](e)})}bindEvent(e,t){switch(e.toUpperCase()){case"CLICK":this.clickEventFunctions.push(t);break;default:return}}}const globalEvents=new GlobalEvents;whenDomReady(()=>{authentication.init(),$(document).foundation(),desktopManager.init(),desktopManager.insertNewIcon(IMG_PATH+"trash.svg","Trash"),desktopManager.insertNewIcon(IMG_PATH+"profiles.svg","Profiles"),desktopManager.insertNewIcon(`${IMG_PATH}default-taskbar-icon-white.svg`,"ShivaylCV"),systemAppsManager.bindApplication("Explorer",`${IMG_PATH}folder.svg`,`${IMG_PATH}folder.svg`,e=>{new Explorer(e)}),systemAppsManager.bindApplication("Terminal",`${IMG_PATH}terminal-green.svg`,`${IMG_PATH}terminal-white.svg`,e=>{new Terminal(e)}),systemAppsManager.bindApplication("Profiles",`${IMG_PATH}profiles.svg`,`${IMG_PATH}profiles.svg`,e=>{new Profiles(e)}),systemAppsManager.bindApplication("AppStore",`${IMG_PATH}default-taskbar-icon-white.svg`,`${IMG_PATH}default-taskbar-icon-white.svg`,e=>{new AppStore(e)}),systemAppsManager.bindApplication("Trash",`${IMG_PATH}trash.svg`,`${IMG_PATH}trash.svg`,e=>{new Trash(e)}),systemAppsManager.bindApplication("ShivaylCV",`${IMG_PATH}default-taskbar-icon-white.svg`,`${IMG_PATH}default-taskbar-icon-white.svg`,e=>{new ShivaylCV(e)}),startMenuManager.init(),contextMenu.bindItems("desktop-icon",[contextMenuTemplates.menuItem("Delete"),contextMenuTemplates.menuItem("Open")]),globalEvents.bindEvent("click",e=>{contextMenu.outsideClickGlobalEvent(e)}),globalEvents.bindEvent("click",e=>{startMenuManager.outsideClickGlobalEvent(e)}),globalEvents.init(),windowManager.openNewModal("<p><strong>Portfolio-OS</strong> is a work in progress and so, some features do not work as of yet.</p>\n     <p>(Features like the AppStore, the Explorer, or searrching for users in the Profiles app)</p>\n     <p>Keep also in mind that this is the Portfolio-OS's Dekstop version and not the mobile, so it is <strong>not</strong> mobile responsive.</p>"),dragAndDrop.updateDraggables()});